!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).mtrXYZ={})}(this,(function(t){"use strict";function e(t){if(16===Object.values(t).length)return t;if(t.length<6)throw new Error("Invalid 2D matrix: Must have exactly 6 elements.");return{a:t.a,b:t.b,c:0,d:0,e:t.c,f:t.d,g:0,h:0,i:0,j:0,k:1,l:0,m:t.e,n:t.f,o:0,p:1}}function a(t){let e,a={transforms:[],transformOrigin:{x:0,y:0},perspectiveOrigin:{x:0,y:0},perspective:0},r=/(\w+)\(([^)]+)\)/g;function s(t){if("string"==typeof t){if(t.includes("rad"))return parseFloat(t)*(180/Math.PI);if(t.includes("turn"))return 360*parseFloat(t)}return parseFloat(t)}for(;null!==(e=r.exec(t));){let t=e[1],r=e[2].split(/,\s*/).map((t=>s(t)));switch(t){case"translate":a.transforms.push({translate:[r[0]||0,r[1]||0]});break;case"translate3D":a.transforms.push({translate:[r[0]||0,r[1]||0,r[2]||0]});break;case"translateX":a.transforms.push({translate:[r[0]||0,0,0]});break;case"translateY":a.transforms.push({translate:[0,r[0]||0,0]});break;case"translateZ":a.transforms.push({translate:[0,0,r[0]||0]});break;case"scale":a.transforms.push({scale:[r[0]||0,r[1]||0]});break;case"scale3D":a.transforms.push({scale:[r[0]||1,r[1]||r[0]||1,r[2]||1]});break;case"skew":a.transforms.push({skew:[r[0]||0,r[1]||0]});break;case"skewX":a.transforms.push({skew:[r[0]||0,0]});break;case"skewY":a.transforms.push({skew:[0,r[0]||0]});break;case"rotate":case"rotateZ":a.transforms.push({rotate:[0,0,r[0]||0]});break;case"rotateX":a.transforms.push({rotate:[r[0]||0,0,0]});break;case"rotateY":a.transforms.push({rotate:[0,r[0]||0,0]});break;case"rotate3d":let t=r[0]||0,e=r[1]||0,s=r[2]||0,n=r[3]||0,i=Math.sqrt(t*t+e*e+s*s);i>0&&(t/=i,e/=i,s/=i);let o=Math.cos(n*Math.PI/180),l=Math.sin(n*Math.PI/180),c=1-o,h=180*Math.atan2(e*l-s*c*t,1-(e*e+s*s)*c)/Math.PI,p=180*Math.asin(s*l+t*c*e)/Math.PI,f=180*Math.atan2(t*l-e*c*s,1-(t*t+s*s)*c)/Math.PI;a.transforms.push({rotate:[h,p,f]});break;case"perspective":a.perspective=r[0]||0;break;case"matrix":case"matrix3d":a.transforms.push({matrix:r})}}return t.split(/;\s*/).forEach((t=>{let[e,r]=t.split(":").map((t=>t.trim()));if("transform-origin"===e||"perspective-origin"===e){let[t,s]=r.split(/\s+/).map(parseFloat);"transform-origin"===e?a.transformOrigin={x:t||0,y:s||0}:a.perspectiveOrigin={x:t||0,y:s||0}}else"perspective"===e&&(a.perspective=parseFloat(r)||0)})),a}function r({transforms:t=[],transFormOrigin:e={x:0,y:0},perspectiveOrigin:a={x:0,y:0},perspective:r=100,force3D:o=!1}={}){let l;return l=!!o||i(t)?s(t,e):n(t,e),l}function s(t=[],e={x:0,y:0}){const a=(t,e)=>({a:t.a*e.a+t.b*e.e+t.c*e.i+t.d*e.m,b:t.a*e.b+t.b*e.f+t.c*e.j+t.d*e.n,c:t.a*e.c+t.b*e.g+t.c*e.k+t.d*e.o,d:t.a*e.d+t.b*e.h+t.c*e.l+t.d*e.p,e:t.e*e.a+t.f*e.e+t.g*e.i+t.h*e.m,f:t.e*e.b+t.f*e.f+t.g*e.j+t.h*e.n,g:t.e*e.c+t.f*e.g+t.g*e.k+t.h*e.o,h:t.e*e.d+t.f*e.h+t.g*e.l+t.h*e.p,i:t.i*e.a+t.j*e.e+t.k*e.i+t.l*e.m,j:t.i*e.b+t.j*e.f+t.k*e.j+t.l*e.n,k:t.i*e.c+t.j*e.g+t.k*e.k+t.l*e.o,l:t.i*e.d+t.j*e.h+t.k*e.l+t.l*e.p,m:t.m*e.a+t.n*e.e+t.o*e.i+t.p*e.m,n:t.m*e.b+t.n*e.f+t.o*e.j+t.p*e.n,o:t.m*e.c+t.n*e.g+t.o*e.k+t.p*e.o,p:t.m*e.d+t.n*e.h+t.o*e.l+t.p*e.p}),r=(t,e,a=0)=>({a:1,b:0,c:0,d:0,e:0,f:1,g:0,h:0,i:0,j:0,k:1,l:0,m:t,n:e,o:a,p:1}),s=t=>{if(6!==t.length)throw new Error("Invalid 2D matrix: Must have exactly 6 elements.");return[t[0],t[1],0,0,t[2],t[3],0,0,0,0,1,0,t[4],t[5],0,1]},n=(t,e)=>{const a=t=>t*Math.PI/180;let r,s,n,i=a(t);switch("rx"===e||"ry"===e||"rz"===e?(r=Math.cos(i),s=Math.sin(i)):n=Math.tan(a(t)),e){case"rx":return{a:1,b:0,c:0,d:0,e:0,f:r,g:s,h:0,i:0,j:-s,k:r,l:0,m:0,n:0,o:0,p:1};case"ry":return{a:r,b:0,c:-s,d:0,e:0,f:1,g:0,h:0,i:s,j:0,k:r,l:0,m:0,n:0,o:0,p:1};case"rz":return{a:r,b:s,c:0,d:0,e:-s,f:r,g:0,h:0,i:0,j:0,k:1,l:0,m:0,n:0,o:0,p:1};case"sx":return{a:1,b:0,c:0,d:0,e:n,f:1,g:0,h:0,i:0,j:0,k:1,l:0,m:0,n:0,o:0,p:1};case"sy":return{a:1,b:n,c:0,d:0,e:0,f:1,g:0,h:0,i:0,j:0,k:1,l:0,m:0,n:0,o:0,p:1}}};let i={a:1,b:0,c:0,d:0,e:0,f:1,g:0,h:0,i:0,j:0,k:1,l:0,m:0,n:0,o:0,p:1};0===e.x&&0===e.y||(i=a(i,r(-e.x,-e.y)));for(let e=t.length-1;e>=0;e--){let o,l,c,h=t[e],p=Object.keys(h)[0],f=h[p];if("scale"===p)[o,l=1,c=1]=f,1===o&&1===l||(i=a(i,{a:o,b:0,c:0,d:0,e:0,f:l,g:0,h:0,i:0,j:0,k:c,l:0,m:0,n:0,o:0,p:1}));else if("skew"===p)[o=0,l=0]=f,l&&(i=a(i,n(l,"sy"))),o&&(i=a(i,n(o,"sx")));else if("rotate"===p)1===f.length&&(f=[0,0,f[0]]),[o=0,l=0,c=0]=f,c&&(i=a(i,n(c,"rz"))),l&&(i=a(i,n(l,"ry"))),o&&(i=a(i,n(o,"rx")));else if("translate"===p)[o,l=0,c=0]=f,(o||l||c)&&(i=a(i,r(o,l,c)));else{if("matrix"!==p)throw new Error("Unknown transform type: "+p);{f=6===f.length?s(f):f;let t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p"],e=Object.fromEntries(t.map(((t,e)=>[t,f[e]])));i=a(i,e)}}}return(e.x||e.y)&&(i=a(i,r(e.x,e.y))),i}function n(t=[],e={x:0,y:0}){const a=(t,e)=>({a:t.a*e.a+t.c*e.b,b:t.b*e.a+t.d*e.b,c:t.a*e.c+t.c*e.d,d:t.b*e.c+t.d*e.d,e:t.a*e.e+t.c*e.f+t.e,f:t.b*e.e+t.d*e.f+t.f}),r=(t,e)=>({a:1,b:0,c:0,d:1,e:t,f:e}),s=(t,e)=>({a:t,b:0,c:0,d:e,e:0,f:0}),n=(t,e)=>{let[a,r]=t.map((t=>t*Math.PI/180)),s={};if("rot"===e){let t=Math.cos(a),e=Math.sin(a);s={a:t,b:e,c:-e,d:t,e:0,f:0}}else if("skew"===e){let t=Math.tan(a);s={a:1,b:Math.tan(r),c:t,d:1,e:0,f:0}}return s};let i={a:1,b:0,c:0,d:1,e:0,f:0};0===e.x&&0===e.y||(i=a(i,r(e.x,e.y)));const o={translate:[0,0],scale:[1,1],skew:[0,0],rotate:[0],matrix:[1,0,0,1,0,0]};for(const e of t){const t=Object.keys(e)[0],l=e[t]||o[t];let[c,h=o[t][1]]=l;switch("rotate"===t&&3===l.length&&(c=l[2]),t){case"matrix":let e=["a","b","c","d","e","f"];i=a(i,Object.fromEntries(e.map(((t,e)=>[t,l[e]]))));break;case"translate":(c||h)&&(i=a(i,r(c,h)));break;case"skew":(c||h)&&(i=a(i,n([c,h],"skew")));break;case"rotate":c&&(i=a(i,n([c],"rot")));break;case"scale":1===c&&1===h||(i=a(i,s(c,h)));break;default:throw new Error(`Unknown transformation type: ${t}`)}}return 0===e.x&&0===e.y||(i=a(i,r(-e.x,-e.y))),i}function i(t,e=!1){if(e)return!0;let a=!1;if(t.filter((t=>Object.keys(t).length>1)).length>1)for(let t=0;t<singleTransforms.length&&!a;t++){let e=singleTransforms[t],r=Object.keys(e),s=Object.values(e);for(let t=0;t<s.length&&!a;t++){let e=s[t],n=r[t];("matrix"!==n&&e.length>2||"matrix"===n&&16===e.length)&&(a=!0)}}else a=t.filter((t=>{let e=Object.keys(t)[0],a=Object.values(t)[0],r="rotate"===e&&3===a.length&&(0!==a[0]||0!==a[1]),s="rotate"===e&&3===a.length&&0===a[0]&&0===a[1]&&0!==a[2];return!!r||!s&&("matrix"!==e&&a.length>2&&("scale"!==e&&0!==a[2]||"scale"===e&&1!==a[2]||"rotate"===e&&0!==a[0])||"matrix"===e&&16===a.length)})).length>0;return a}function o(t){let e=[t.a,t.e,t.i],a=[t.b,t.f,t.j],r=[t.c,t.g,t.k],s=e[0]*r[0]+e[1]*r[1]+e[2]*r[2],n=a[0]*r[0]+a[1]*r[1]+a[2]*r[2],i=0===r[0]&&0===r[1];return Math.abs(s)<1e-6&&Math.abs(n)<1e-6&&i}function l(t,e=1/0){let a=1;return e!==1/0&&0!==t.o&&(a=1/(1-t.o/e),a=Math.max(.1,Math.min(a,10))),{a:t.a*a,b:t.b*a,c:t.e*a,d:t.f*a,e:t.m*a,f:t.n*a}}function c(t){u(t=e(t));let{a:a,b:r,c:s,d:n,e:i,f:o,g:l,h:c,i:h,j:p,k:f,l:x,m:m,n:d,o:b,p:g}=t,k=0!=l&&0!=p&&Math.abs(l)===Math.abs(p),y=0!=s&&0!=h&&Math.abs(s)===Math.abs(h),M=0!=i&&0!=r&&Math.abs(r)===Math.abs(i),w=k||y||M,j=Math.abs(i)>0&&!w,v=Math.abs(r)>0&&!w,$=1!=a,X=1!=o,O=1!=f;return{has_rotX:k,has_rotY:y,has_rotZ:M,has_rots:w,has_scaleX:$,has_scaleY:X,has_scaleZ:O,has_scales:$||X||O,has_skewX:j,has_skewY:v,has_skews:j||v}}function h(t,e=3){if("object"!=typeof t||null===t)throw new Error("Invalid matrix. Expected an object with a-p properties.");let{e:a}=t;return+(Math.atan(a)*(180/Math.PI)).toFixed(e)}function p(t,e=3){if("object"!=typeof t||null===t)throw new Error("Invalid matrix. Expected an object with a-p properties.");let{b:a}=t;return+(Math.atan(a)*(180/Math.PI)).toFixed(e)}function f(t,e=3){if("object"!=typeof t||null===t)throw new Error("Invalid matrix. Expected an object with a-p properties.");let{a:a,b:r,c:s,e:n,f:i,g:o,i:l,j:c,k:h}=t,p=Math.atan(n/a)*(180/Math.PI),f=Math.atan(r/a)*(180/Math.PI),x=[[1,Math.tan(f*Math.PI/180),0],[Math.tan(p*Math.PI/180),1,0],[0,0,1]],u=x[0][0]*(x[1][1]*x[2][2]-x[1][2]*x[2][1])-x[0][1]*(x[1][0]*x[2][2]-x[1][2]*x[2][0])+x[0][2]*(x[1][0]*x[2][1]-x[1][1]*x[2][0]);if(Math.abs(u)<1e-6)throw new Error("Skew matrix is singular (non-invertible).");let m=[[(x[1][1]*x[2][2]-x[1][2]*x[2][1])/u,(x[0][2]*x[2][1]-x[0][1]*x[2][2])/u,(x[0][1]*x[1][2]-x[0][2]*x[1][1])/u],[(x[1][2]*x[2][0]-x[1][0]*x[2][2])/u,(x[0][0]*x[2][2]-x[0][2]*x[2][0])/u,(x[0][2]*x[1][0]-x[0][0]*x[1][2])/u],[(x[1][0]*x[2][1]-x[1][1]*x[2][0])/u,(x[0][1]*x[2][0]-x[0][0]*x[2][1])/u,(x[0][0]*x[1][1]-x[0][1]*x[1][0])/u]],d=[[a*m[0][0]+r*m[1][0]+s*m[2][0],a*m[0][1]+r*m[1][1]+s*m[2][1],a*m[0][2]+r*m[1][2]+s*m[2][2]],[n*m[0][0]+i*m[1][0]+o*m[2][0],n*m[0][1]+i*m[1][1]+o*m[2][1],n*m[0][2]+i*m[1][2]+o*m[2][2]],[l*m[0][0]+c*m[1][0]+h*m[2][0],l*m[0][1]+c*m[1][1]+h*m[2][1],l*m[0][2]+c*m[1][2]+h*m[2][2]]],b=d[0][0],g=d[1][1],k=d[2][2];return{scaleX:+b.toFixed(e),scaleY:+g.toFixed(e),scaleZ:+k.toFixed(e)}}function x(t,e=0,a=0,r=1,s=1,n=1,i=9){if("object"!=typeof t||null===t)throw new Error("Invalid matrix. Expected an object with a-p properties.");const{a:o,b:l,e:c}=t;let h=Math.atan(c/s)*(180/Math.PI),p=Math.atan(l/r)*(180/Math.PI);if(0!==e&&0!==a){const t=h*Math.PI/180,e=p*Math.PI/180;h=Math.atan(Math.tan(t)/Math.cos(e))*(180/Math.PI),p=Math.atan(Math.tan(e)/Math.cos(t))*(180/Math.PI)}return{skewX:+h.toFixed(i),skewY:+p.toFixed(i)}}function u(t,e={x:0,y:0},a={x:0,y:0},r=1/0){let s={...t};s.e-=a.x*t.a+a.y*t.c,s.f-=a.x*t.b+a.y*t.d,s.g-=a.x*t.i+a.y*t.k;let n=0,i=0,o=0;return r!==1/0&&(o=-1/r,n=e.x*o,i=e.y*o),{...s,q:n,r:i,s:o,t:1}}function m(t,e,a={x:0,y:0,z:0},r=1/0,s=null,n=-1){let i=(t=(t=>{if(void 0===t[0].x){if(Array.isArray(t[0]))return t.map((t=>({x:t[0],y:t[1]})));{let e=[];for(let a=1,r=t.length;a<r;a+=2)e.push({x:t[a-1],y:t[a]});return e}}return t})(t))[0].hasOwnProperty("z"),c=!1;(s=16===Object.values(e).length)&&!i&&(c=o(e),c&&(s=!1,e=l(e,r)));let h=[];for(let i=0,o=t.length;i<o;i++){let o=t[i];o=s?d(o,e,a,r,n):b(o,e,n),h.push(o)}return h}function d(t,e,a={x:0,y:0},r=1/0,s=-1){let n=t.x,i=t.y,o=t.z||0,l=e.a*n+e.e*i+e.i*o+1*e.m,c=e.b*n+e.f*i+e.j*o+1*e.n,h=e.c*n+e.g*i+e.k*o+1*e.o,p=e.d*n+e.h*i+e.l*o+1*e.p;if(0!==p&&(l/=p,c/=p,h/=p),r!==1/0){let t=1-h/r,e=(l-a.x)/t,s=(c-a.y)/t;0!==t&&(l=a.x+e,c=a.y+s,0===t&&(t=.01),t<0&&(t=Math.abs(t),l=a.x-(l-a.x)/t,c=a.y-(c-a.y)/t))}let f={x:l,y:c};return s>-1&&(f.x=+f.x.toFixed(s),f.y=+f.y.toFixed(s)),f}function b(t,e,a=-1){let{a:r,b:s,c:n,d:i,e:o,f:l}=e,{x:c,y:h}=t,p={x:r*c+n*h+o,y:s*c+i*h+l};return a>-1&&(p.x=+p.x.toFixed(a),p.y=+p.y.toFixed(a)),p}function g({transforms:t=[],transFormOrigin:e={x:0,y:0},perspectiveOrigin:a={x:0,y:0},perspective:r=100}={}){let s=[],n=t.filter((t=>{let e=Object.keys(t)[0],a=Object.values(t)[0];return"matrix"!==e&&a.length>2||"matrix"===e&&16===a.length})).length>0,i="px";t.forEach((t=>{let e=Object.keys(t)[0],a=Object.values(t)[0];i="rotate"===e||"skew"===e?"deg":"scale"===e||"matrix"===e?"":"px";let r=a.map(((t,e)=>""!==t?`${t}${i}`:""));if(n){let t,a,n;"translate"===e?[t,a="0px",n="0px"]=r:[t,a="0deg",n="0deg"]=r,"matrix"===e?s.push(`${e}3d(${r.join(",")})`):"skew"===e?s.push(`${e}X(${t}) ${e}Y(${a})`):s.push(`${e}X(${t}) ${e}Y(${a}) ${e}Z(${n})`)}else s.push(`${e}(${r.join(", ")})`)}));let o=`perspective-origin:${a.x}px ${a.y}px; perspective:${r}px;`;return s=`transform:${s.join(" ")};transform-origin:${e.x}px ${e.y}px;`,{el:s,parent:o}}function k(t={}){"string"==typeof t&&(t=a(t));const{transforms:e=[],transFormOrigin:s={x:0,y:0},perspectiveOrigin:n={x:0,y:0},perspective:i=100,force3D:o=!1}=t;this.transforms=e,this.transFormOrigin=s,this.perspectiveOrigin=n,this.perspective=i,this.force3D=o,this.matrix=r({transforms:e,transFormOrigin:s,perspectiveOrigin:n,perspective:i,force3D:o}),this.is3D=void 0!==this.matrix.p,this.css=g({transforms:e,transFormOrigin:s,perspectiveOrigin:n,perspective:i,force3D:o})}k.prototype.transformPoints=function(t,e=8){let a=m(t,this.matrix,this.perspectiveOrigin,this.perspective,this.force3D,e);return this.ptsT=a,a},t.Mtx=k,t.analyzeMatrix=c,t.canFlattenTo2D=o,t.flattenTo2D=l,t.getAdjustedSkew=x,t.getCSSTransform=g,t.getMatrix=r,t.getMatrix2D=n,t.getMatrix3D=s,t.getProper3DMatrix=u,t.getScaling=f,t.getSkewX=h,t.getSkewY=p,t.has3Dtransforms=i,t.normalizeTo3DMatrix=e,t.parseCSSTransform=a,t.qrDecomposeMatrix=function(t,e=3){let{a:a,b:r,c:s,d:n,e:i,f:o}=t;Array.isArray(t)&&([a,r,s,n,i,o]=t);let l=Math.atan2(r,a),c=Math.pow(a,2)+Math.pow(r,2),h=Math.sqrt(c),p=(a*n-s*r)/h,f=Math.atan2(a*s+r*n,c)/(Math.PI/180),x={translateX:i||0,translateY:o||0,rotate:l?l/(Math.PI/180):0,scaleX:h,scaleY:p,skewX:f,skewY:0},u=[],m=[];for(let t in x){x[t]=+parseFloat(x[t]).toFixed(e);let a=x[t],r="";"rotate"!=t&&"skewX"!=t||(r="deg"),-1!=t.indexOf("translate")&&(r="px");let s=["scaleX","scaleY","translateX","translateY"];0!==a&&u.push(`${t}(${a}${r})`),-1==s.indexOf(t)&&0!==a?m.push(`${t}(${a})`):"scaleX"==t?m.push(`scale(${+h.toFixed(e)} ${+p.toFixed(e)})`):"translateX"==t&&m.push(`translate(${x.translateX} ${x.translateY})`)}return x.cssTransform=u.join(" "),x.svgTransform=m.join(" "),x},t.qrDecomposeMatrix3D=function(t,a=3){if("object"!=typeof t||null===t)throw new Error("Invalid 3D matrix. Expected an object with 16 properties.");t=e(t);let{a:r,b:s,c:n,d:i,e:o,f:l,g:u,h:m,i:d,j:b,k:g,l:k,m:y,n:M,o:w,p:j}=t,v=c(t),{has_rotX:$,has_rotY:X,has_rotZ:O,has_rots:F,has_scaleX:Y,has_scaleY:P,has_scaleZ:I,has_scales:D,has_skewX:_,has_skewY:Z,has_skews:E}=v,T=y,z=M,S=w,A=f(t),{scaleX:q,scaleY:C,scaleZ:N}=A;q=.5,C=.25,N=1;let U,B,G,H=h(t),J=p(t),K=r/q,L=o/C,Q=l/C,R=u/C,V=d/N,W=b/N,tt=g/N,et=Math.sqrt(K*K+L*L);if(et>1e-6?(U=Math.atan2(W,tt),B=Math.atan2(-V,et),G=Math.atan2(L,K)):(U=Math.atan2(-R,Q),B=Math.atan2(-V,et),G=0),U=$?-+(U*(180/Math.PI)).toFixed(a):0,B=X?-+(B*(180/Math.PI)).toFixed(a):0,G=O?-+(G*(180/Math.PI)).toFixed(a):0,_){H=x(t,H,J,q,C,N).skewX}if(Z){J=x(t,H,J,q,C,N).skewY}let at={translateX:+T.toFixed(a),translateY:+z.toFixed(a),translateZ:+S.toFixed(a),rotateX:U,rotateY:B,rotateZ:G,scaleX:+q.toFixed(a),scaleY:+C.toFixed(a),scaleZ:+N.toFixed(a),skewX:+H.toFixed(a),skewY:+J.toFixed(a)},rt=[];return(at.translateX||at.translateY||at.translateZ)&&rt.push(`translate3d(${at.translateX}px, ${at.translateY}px, ${at.translateZ}px)`),at.rotateX&&rt.push(`rotateX(${at.rotateX}deg)`),at.rotateY&&rt.push(`rotateY(${at.rotateY}deg)`),at.rotateZ&&rt.push(`rotateZ(${at.rotateZ}deg)`),at.skewX&&rt.push(`skewX(${at.skewX}deg)`),at.skewY&&rt.push(`skewY(${at.skewY}deg)`),1===at.scaleX&&1===at.scaleY&&1===at.scaleZ||rt.push(`scale3d(${at.scaleX}, ${at.scaleY}, ${at.scaleZ})`),at.cssTransform=rt.join(" "),at},t.setCSSTransforms=function(t,e){let a=g(e);t.setAttribute("style",a),t.parentNode.style.perspective=e.perspective+"px",t.parentNode.style.perspectiveOrigin=`${e.perspectiveOrigin.x}px ${e.perspectiveOrigin.y}px`},t.transformPoint=function(t,e,a={x:0,y:0},r=1/0,s=null,n=-1){return t=Array.isArray(t)?{x:t[0],y:t[1],z:t[1]||0}:t,null===s&&(s=16===Object.values(e).length),t=s?d(t,e,a,r,n):b(t,e,n)},t.transformPoint2D=b,t.transformPoint3D=d,t.transformPointByProper3DMatrix=function(t,e){let a=e.x,r=e.y,s=e.z||0,n=t.a*a+t.e*r+t.i*s+1*t.m,i=t.b*a+t.f*r+t.j*s+1*t.n,o=t.c*a+t.g*r+t.k*s+1*t.o,l=t.d*a+t.h*r+t.l*s+1*t.p;return 0!==l&&(n/=l,i/=l,o/=l),{x:n+(t.q*a+t.t),y:i+(t.r*r+t.t),z:o+(t.s*s+t.t)}},t.transformPoints=m}));
